<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è¦–è—ç§‘é­”æ³•ç•«æ¿ (åœ–åº«ç‰ˆ)</title>
    <style>
        /* --- åŸºç¤è¨­å®š --- */
        body { 
            margin: 0; 
            overflow: hidden; 
            background-color: #000; /* å…¨é»‘èƒŒæ™¯ */
            font-family: "Microsoft JhengHei", sans-serif; 
            touch-action: none; /* é˜²æ­¢è§¸æ§æ™‚è¢å¹•ç§»å‹• */
        }

        /* ç•«å¸ƒèˆ‡çµæœå±¤ */
        #canvas { 
            display: block; 
            position: absolute; 
            top: 0; left: 0; 
            z-index: 5; 
            cursor: crosshair;
            transition: opacity 1s ease; /* æ·¡å‡ºæ•ˆæœ */
        }
        
        #result-container {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 1; /* åœ¨ç•«å¸ƒä¸‹é¢ */
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #000;
        }

        #result-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            opacity: 0; /* ä¸€é–‹å§‹æ˜¯é€æ˜çš„ */
            transition: opacity 2s ease; /* æ…¢æ…¢æµ®ç¾ */
        }

        /* --- æŒ‰éˆ•ä»‹é¢ --- */
        #controls {
            position: absolute;
            bottom: 20px;
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 40px;
            z-index: 100;
        }

        .btn {
            border: 4px solid #fff;
            padding: 15px 40px;
            font-size: 28px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            color: white;
            box-shadow: 0 0 15px rgba(255,255,255,0.8);
            transition: transform 0.1s;
        }

        .btn:active { transform: scale(0.95); }

        .btn-magic { 
            background: linear-gradient(45deg, #ff0055, #ff9900); 
            font-size: 32px; /* é­”æ³•æŒ‰éˆ•å¤§ä¸€é» */
        } 
        
        .btn-reset { 
            background-color: #0066ff; 
        }

        /* çµ¦è€å¸«çš„æç¤º */
        #teacher-hint {
            position: absolute; top: 10px; left: 10px; color: #555; font-size: 12px; pointer-events: none;
        }
    </style>
</head>
<body>

    <div id="teacher-hint">è€å¸«è¨­å®šï¼šè«‹åœ¨ä»£ç¢¼ä¸­ä¿®æ”¹ imageUrls é™£åˆ—ä¾†æ›´æ›åœ–ç‰‡</div>

    <div id="result-container">
        <img id="result-image" src="" alt="é­”æ³•åœ–ç‰‡">
    </div>

    <canvas id="canvas"></canvas>

    <div id="controls">
        <button class="btn btn-reset" onclick="resetCanvas()">é‡æ–°ä¾†é</button>
        <button class="btn btn-magic" onclick="doMagic()">âœ¨ è®Šèº«ï¼</button>
    </div>

<script>
    // ==========================================
    // ğŸ¨ è€å¸«å°ˆç”¨è¨­å®šå€ (TEACHER SETTINGS)
    // ==========================================
    
    // è«‹åœ¨é€™è£¡æ”¾å…¥æ‚¨æƒ³è®“å­¸ç”Ÿã€Œè®Šã€å‡ºä¾†çš„åœ–ç‰‡ç¶²å€ã€‚
    // å¯ä»¥æ˜¯ç¶²ä¸Šæ‰¾çš„åœ–ï¼Œä¹Ÿå¯ä»¥æ˜¯æ‚¨ä¸Šå‚³åˆ° Google Drive/Imgur çš„åœ–ã€‚
    // é€™è£¡æˆ‘å…ˆé è¨­äº†å¹¾å¼µé«˜å°æ¯”ã€æ¼‚äº®çš„ã€Œè´è¶ã€èˆ‡ã€Œæ˜Ÿç©ºã€åœ–ç‰‡ã€‚
    
    const imageUrls = [
        "https://images.unsplash.com/photo-1557401614-7471239c063c?q=80&w=2000&auto=format&fit=crop", // éœ“è™¹è´è¶
        "https://images.unsplash.com/photo-1470252649378-9c29740c9fa8?q=80&w=2000&auto=format&fit=crop", // æ™¨å…‰é¢¨æ™¯
        "https://images.unsplash.com/photo-1463852247062-1bbca38f7805?q=80&w=2000&auto=format&fit=crop", // é®®è±”èŠ±æœµ
        "https://images.unsplash.com/photo-1535591273668-578e31182c4f?q=80&w=2000&auto=format&fit=crop", // å®‡å®™æ˜Ÿç©º
        "https://images.unsplash.com/photo-1550684848-fac1c5b4e853?q=80&w=2000&auto=format&fit=crop"  // è³½åšé¾å…‹é¢¨æ ¼
    ];

    // ==========================================
    // ç¨‹å¼é‚è¼¯å€
    // ==========================================

    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const resultImg = document.getElementById('result-image');

    // è¨­å®šå…¨è¢å¹•
    function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    // ç­†åˆ·è¨­å®š (é©åˆè¦–éšœçš„é«˜å°æ¯”)
    ctx.lineJoin = 'round';
    ctx.lineCap = 'round';
    ctx.lineWidth = 40; // é è¨­ç²—ç´°
    let hue = 0; // é¡è‰²è¼ª

    let isDrawing = false;
    let lastX = 0;
    let lastY = 0;
    let hasDrawn = false; // åµæ¸¬å­¸ç”Ÿæœ‰æ²’æœ‰å‹•éç­†

    // ç¹ªåœ–å‡½å¼
    function draw(x, y) {
        // è®Šè‰²æ•ˆæœï¼šéš¨æ™‚é–“è®Šæˆå½©è™¹è‰²
        ctx.strokeStyle = `hsl(${hue}, 100%, 60%)`;
        ctx.shadowBlur = 20; // ç™¼å…‰æ•ˆæœ
        ctx.shadowColor = `hsl(${hue}, 100%, 60%)`;
        
        ctx.beginPath();
        ctx.moveTo(lastX, lastY);
        ctx.lineTo(x, y);
        ctx.stroke();

        hue++; // é¡è‰²è®Šæ›
        if (hue >= 360) hue = 0;

        lastX = x;
        lastY = y;
        hasDrawn = true;
    }

    // --- è¼¸å…¥äº‹ä»¶è™•ç† (æ”¯æ´æ»‘é¼ /çœ¼å‹•å„€/è§¸æ§) ---
    
    function startPosition(e) {
        isDrawing = true;
        // å–å¾—åº§æ¨™ (å…¼å®¹æ»‘é¼ èˆ‡è§¸æ§)
        if (e.touches) {
            lastX = e.touches[0].clientX;
            lastY = e.touches[0].clientY;
        } else {
            lastX = e.offsetX;
            lastY = e.offsetY;
        }
    }

    function movePosition(e) {
        // ç‰¹åˆ¥è¨­è¨ˆï¼šå°æ–¼çœ¼å‹•å„€ï¼Œé€šå¸¸æ²’æœ‰ã€ŒæŒ‰ä½ã€å‹•ä½œ
        // æ‰€ä»¥æˆ‘å€‘è¨­å®šï¼šåªè¦æ»‘é¼ åœ¨å‹•ï¼Œä¸”ä¹‹å‰æœ‰ã€Œé€²å…¥ã€éç•«é¢ï¼Œå°±è¦–ç‚ºç¹ªç•«
        // æˆ–è€…æ‚¨å¯ä»¥ç°¡å–®åœ°è®“å®ƒã€Œæ°¸é éƒ½åœ¨ç•«ã€
        
        // é€™è£¡è¨­å®šï¼šåªè¦ç§»å‹•å°±ç•« (é©åˆåš´é‡è‚¢é«”éšœç¤™)
        let clientX, clientY;
        
        if (e.touches) {
            clientX = e.touches[0].clientX;
            clientY = e.touches[0].clientY;
        } else {
            clientX = e.offsetX;
            clientY = e.offsetY;
        }

        // å¦‚æœæ˜¯å‰›é–‹å§‹ç§»å‹•ï¼Œå…ˆé‡ç½®èµ·é»
        if (!isDrawing) {
            lastX = clientX;
            lastY = clientY;
            isDrawing = true;
        }
        
        draw(clientX, clientY);
    }

    // ç¶å®šäº‹ä»¶
    canvas.addEventListener('mousemove', movePosition);
    canvas.addEventListener('touchmove', (e) => { e.preventDefault(); movePosition(e); }, { passive: false });

    // ==========================================
    // âœ¨ è®Šèº«é‚è¼¯
    // ==========================================
    function doMagic() {
        if (!hasDrawn) {
            // é›–ç„¶æ²’ç•«ä¹Ÿå¯ä»¥è®Šï¼Œä½†æœ€å¥½é¼“å‹µç•«ä¸€ä¸‹ï¼Œé€™è£¡ä¸åšé™åˆ¶
        }

        // 1. éš¨æ©Ÿé¸ä¸€å¼µåœ–
        const randomImage = imageUrls[Math.floor(Math.random() * imageUrls.length)];
        resultImg.src = randomImage;

        // 2. è¦–è¦ºç‰¹æ•ˆï¼šç•«å¸ƒæ…¢æ…¢æ¶ˆå¤±ï¼Œåœ–ç‰‡æ…¢æ…¢æµ®ç¾
        canvas.style.opacity = '0'; // ç•«å¸ƒè®Šé€æ˜
        resultImg.style.opacity = '1'; // åœ–ç‰‡è®Šå¯¦é«”

        // (å¯é¸) é€™è£¡å¯ä»¥åŠ å…¥éŸ³æ•ˆæ’­æ”¾
        // let audio = new Audio('magic-sound.mp3');
        // audio.play();
    }

    function resetCanvas() {
        // æ¸…é™¤ç•«é¢
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        // æ¢å¾©ç‹€æ…‹
        canvas.style.opacity = '1';
        resultImg.style.opacity = '0';
        
        isDrawing = false;
        hasDrawn = false;
        
        // æ›´æ›é¡è‰²èµ·å§‹é»ï¼Œå¢åŠ æ–°é®®æ„Ÿ
        hue = Math.random() * 360;
    }

</script>
</body>
</html>